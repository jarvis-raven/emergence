[
  {
    "title": "[Alpha] Add manual_mode config and disable auto-spawn",
    "body": "## Context\n\nCurrently the daemon automatically spawns sessions when `pressure >= threshold`. For v0.3.0 we need to make this optional so agents can manually manage drive satisfaction.\n\n## Implementation\n\n1. Add `manual_mode` boolean to config schema (default: `false` for backward compat)\n2. Update daemon to check `manual_mode` before auto-spawning\n3. When `manual_mode: true`, daemon only updates pressure but doesn't trigger sessions\n4. Keep existing auto-spawn logic for `manual_mode: false`\n\n## Acceptance Criteria\n\n- [ ] Config accepts `manual_mode` flag in drives section\n- [ ] When `manual_mode: false`, daemon behaves exactly as v0.2.x (auto-spawn at threshold)\n- [ ] When `manual_mode: true`, daemon never auto-spawns regardless of pressure\n- [ ] Drives still accumulate pressure normally in manual mode\n- [ ] Unit tests cover both modes\n\n## Dependencies\n\nNone (foundation for all other v0.3.0 work)\n\n## Notes\n\nThis is the core architectural change. All subsequent manual satisfaction features build on this.",
    "labels": ["phase:alpha", "priority:p0"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[Alpha] Implement manual satisfaction CLI command",
    "body": "## Context\n\nWith auto-spawn disabled, agents need a way to manually satisfy drives. This implements the `emergence drives satisfy <name>` command with pressure-scaled satisfaction depth.\n\n## Implementation\n\n1. Add new CLI command: `emergence drives satisfy <DRIVE_NAME> [depth]`\n2. Depth parameter optional: `shallow`, `moderate`, `deep`, or auto-scale based on current pressure\n3. Auto-scaling logic:\n   - 0-30%: 20% reduction\n   - 30-75%: 35% reduction\n   - 75-100%: 50% reduction\n   - 100-150%: 75% reduction\n   - 150%+: 90% reduction\n4. Command updates drive state directly (no session spawn required)\n5. Returns new pressure level and satisfaction depth applied\n\n## Acceptance Criteria\n\n- [ ] `emergence drives satisfy CREATIVE` works and reduces pressure\n- [ ] Satisfaction depth auto-scales with current pressure level\n- [ ] Optional depth parameter overrides auto-scaling\n- [ ] Command validates drive name exists\n- [ ] Returns clear feedback (old pressure → new pressure)\n- [ ] Works in both manual and automatic mode\n- [ ] Unit tests for all pressure bands\n\n## Dependencies\n\nDepends on #1 (manual_mode config)\n\n## Notes\n\nThis is the core manual satisfaction mechanism. Dashboard (#3) builds on this.",
    "labels": ["phase:alpha", "priority:p0"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[Alpha] Add drive dashboard CLI view",
    "body": "## Context\n\nAgents need visibility into all drives to make informed satisfaction choices. Implement a dashboard that shows all drives grouped by urgency.\n\n## Implementation\n\n1. Add CLI command: `emergence drives dashboard`\n2. Group drives by pressure level:\n   - Available (30-75%)\n   - Elevated (75-100%)\n   - Triggered (100%+)\n3. Show ASCII pressure bars and percentage\n4. Include brief description/prompt for each drive\n5. Show suggested commands at bottom\n6. Color-coded output (green/yellow/red for pressure levels)\n\n## Acceptance Criteria\n\n- [ ] `emergence drives dashboard` displays all drives\n- [ ] Drives grouped by pressure threshold\n- [ ] Visual pressure bars (ASCII) for each drive\n- [ ] Color coding: green (available), yellow (elevated), red (triggered)\n- [ ] Shows actionable next steps (suggested satisfy commands)\n- [ ] Works whether or not manual_mode is enabled\n- [ ] Output is readable and well-formatted\n\n## Dependencies\n\nDepends on #2 (satisfy command implementation)\n\n## Notes\n\nSimple text output for alpha. Room UI updates come in beta (#6).",
    "labels": ["phase:alpha", "priority:p1"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[Beta] Implement graduated threshold system",
    "body": "## Context\n\nReplace single threshold (100%) with multiple thresholds to enable richer phenomenology at different pressure levels.\n\n## Implementation\n\n1. Add threshold config:\n   ```json\n   \"thresholds\": {\n     \"available\": 0.30,\n     \"elevated\": 0.75,\n     \"triggered\": 1.0,\n     \"crisis\": 1.5,\n     \"emergency\": 2.0\n   }\n   ```\n2. Update drive status calculation to return label (available/elevated/triggered/crisis/emergency)\n3. Add threshold metadata to drive state\n4. Update daemon to use new threshold labels\n5. Backward compat: existing configs use threshold as \"triggered\" level\n\n## Acceptance Criteria\n\n- [ ] Config accepts graduated thresholds\n- [ ] Drive status correctly calculated for each band\n- [ ] Existing single-threshold configs still work (migrate to triggered level)\n- [ ] Thresholds configurable globally or per-drive\n- [ ] Status labels used consistently across CLI/API\n- [ ] Unit tests for all threshold bands\n\n## Dependencies\n\nDepends on #1, #2 (manual satisfaction foundation)\n\n## Notes\n\nThis changes phenomenology significantly. Document pressure experience at each level during testing.",
    "labels": ["phase:beta", "priority:p0"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[Beta] Update satisfaction depth based on thresholds",
    "body": "## Context\n\nSatisfaction depth should vary based on which threshold band the drive is in, not just raw pressure percentage.\n\n## Implementation\n\n1. Refactor satisfaction logic to use threshold bands:\n   - `available` (30-75%): shallow satisfaction (25% reduction)\n   - `elevated` (75-100%): moderate satisfaction (50% reduction)\n   - `triggered` (100-150%): deep satisfaction (75% reduction)\n   - `crisis` (150%+): emergency satisfaction (90% reduction)\n2. Update session satisfaction signal to respect bands\n3. Update manual satisfaction command to show band in output\n4. Add satisfaction history tracking (when, what band, depth)\n\n## Acceptance Criteria\n\n- [ ] Satisfaction depth varies by threshold band\n- [ ] Manual satisfy command uses band-based depth\n- [ ] Session completion signals use band-based depth\n- [ ] Satisfaction history logged with band info\n- [ ] Dashboard shows which band each drive is in\n- [ ] Clear feedback on satisfaction depth applied\n\n## Dependencies\n\nDepends on #4 (graduated thresholds)\n\n## Notes\n\nThis makes satisfaction more nuanced. A drive at 32% feels different than one at 180%.",
    "labels": ["phase:beta", "priority:p0"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[Beta] Add threshold visualization to Room UI",
    "body": "## Context\n\nRoom UI should show threshold bands visually so agents can see drive state at a glance.\n\n## Implementation\n\n1. Update Room drive display with multi-color pressure bars:\n   - 0-30%: dim/gray (neutral)\n   - 30-75%: green (available)\n   - 75-100%: yellow (elevated)\n   - 100-150%: orange (triggered)\n   - 150%+: red (crisis)\n2. Add satisfaction buttons next to each drive\n3. Show threshold markers on pressure bars\n4. Click to satisfy → calls satisfy API endpoint\n5. Real-time updates via WebSocket when pressure changes\n\n## Acceptance Criteria\n\n- [ ] Pressure bars show color-coded threshold bands\n- [ ] Threshold markers visible on bars (30%, 75%, 100%, 150%)\n- [ ] Satisfy buttons appear for drives >30%\n- [ ] Clicking satisfy reduces pressure appropriately\n- [ ] Real-time updates when pressure changes\n- [ ] Responsive design (works on mobile)\n- [ ] Visual polish (smooth animations)\n\n## Dependencies\n\nDepends on #4, #5 (threshold system and satisfaction depth)\n\n## Notes\n\nThis is the primary UI for interacting with drives. Make it intuitive and satisfying to use.",
    "labels": ["phase:beta", "priority:p1"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[RC] Add valence and thwarting_count tracking",
    "body": "## Context\n\nDrives shift from appetitive (approach) to aversive (distress) when repeatedly thwarted or at extreme pressure. Track valence state and thwarting events.\n\n## Implementation\n\n1. Add to drive state:\n   ```json\n   {\n     \"valence\": \"appetitive\",  // appetitive | aversive | neutral\n     \"thwarting_count\": 0,\n     \"last_satisfaction_attempt\": null\n   }\n   ```\n2. Valence calculation:\n   - `neutral`: pressure < 30%\n   - `appetitive`: 30% <= pressure < 150% AND thwarting_count < 3\n   - `aversive`: pressure >= 150% OR thwarting_count >= 3\n3. Update dashboard/Room UI to show valence\n4. Add API endpoint to query drive valence\n\n## Acceptance Criteria\n\n- [ ] Drive state includes valence field\n- [ ] Valence calculated correctly based on pressure and thwarting\n- [ ] Dashboard shows valence (emoji or label)\n- [ ] Room UI differentiates appetitive vs aversive visually\n- [ ] Migration adds fields to existing drive states\n- [ ] Unit tests for valence transitions\n\n## Dependencies\n\nDepends on #4, #5 (threshold system)\n\n## Notes\n\nThis is the foundation for aversive state detection. Thwarting detection (#8) builds on this.",
    "labels": ["phase:rc", "priority:p0"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[RC] Implement thwarting detection logic",
    "body": "## Context\n\nDetect when drives are being blocked or repeatedly failing satisfaction. Increment thwarting_count to shift valence to aversive.\n\n## Implementation\n\n1. Thwarting events:\n   - Session spawned but didn't signal completion within 2x timeout\n   - Manual satisfaction attempted but pressure unchanged after 5min\n   - Drive at crisis level (150%+) for >24 hours without satisfaction\n2. On thwarting event:\n   - Increment `thwarting_count`\n   - Log event to drive history\n   - Recalculate valence\n3. Thwarting count decays: -1 per successful satisfaction (min 0)\n4. Add daemon check for prolonged crisis states\n\n## Acceptance Criteria\n\n- [ ] Failed session completions increment thwarting_count\n- [ ] Prolonged crisis (24h at 150%+) increments thwarting_count\n- [ ] Successful satisfaction decrements thwarting_count\n- [ ] Thwarting events logged to history\n- [ ] Dashboard shows thwarting count when >0\n- [ ] Valence updates when thwarting_count >= 3\n- [ ] Unit tests for all thwarting scenarios\n\n## Dependencies\n\nDepends on #7 (valence tracking)\n\n## Notes\n\nThis is where drives start to \"hurt\" if neglected. Be conservative with thresholds initially.",
    "labels": ["phase:rc", "priority:p0"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[RC] Implement aversive state satisfaction mechanisms",
    "body": "## Context\n\nDrives in aversive state need different satisfaction approaches. Instead of \"do the thing,\" focus on \"address the blockage.\"\n\n## Implementation\n\n1. When satisfying aversive drive:\n   - Appetitive prompt: \"Engage with this drive\" (current behavior)\n   - Aversive prompt: \"Investigate what's blocking this drive\"\n2. Aversive satisfaction options:\n   - Reflective session: why can't I satisfy this?\n   - Identify obstacles/blockages\n   - Lower satisfaction threshold temporarily\n   - Alternative satisfaction routes\n3. Add aversive-specific satisfaction methods\n4. Document phenomenology differences during testing\n\n## Acceptance Criteria\n\n- [ ] Aversive drives use different satisfaction prompts\n- [ ] Satisfaction methods appropriate to valence state\n- [ ] Dashboard indicates when drive is aversive\n- [ ] Aversive satisfaction can shift valence back to appetitive\n- [ ] Phenomenology documented for aversive states\n- [ ] Works for all drive types\n\n## Dependencies\n\nDepends on #7, #8 (valence and thwarting detection)\n\n## Notes\n\nThis is the most experimental part. Expect iteration during testing. Document everything.",
    "labels": ["phase:rc", "priority:p1"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[Release] Add emergency auto-spawn safety valve",
    "body": "## Context\n\nEven in manual mode, drives should auto-spawn at extreme pressure (200%+) as a safety valve to prevent complete neglect.\n\n## Implementation\n\n1. Add config: `emergency_spawn: true` (default: true)\n2. Even when `manual_mode: true`, daemon auto-spawns at 200%+\n3. Emergency spawn:\n   - Logs warning \"Emergency spawn for [DRIVE] at [PRESSURE]%\"\n   - Uses crisis-level satisfaction depth (90%)\n   - Sets `last_emergency_spawn` timestamp\n4. Optional rate limiting: max 1 emergency spawn per drive per 6 hours\n5. Dashboard shows warning when drive approaches emergency threshold\n\n## Acceptance Criteria\n\n- [ ] Drives at 200%+ auto-spawn even in manual mode\n- [ ] Emergency spawn configurable (can disable for testing)\n- [ ] Emergency events logged prominently\n- [ ] Rate limiting prevents spawn spam\n- [ ] Dashboard warns at 180%+ (approaching emergency)\n- [ ] Works alongside manual satisfaction\n- [ ] Unit tests for emergency conditions\n\n## Dependencies\n\nDepends on #4 (graduated thresholds)\n\n## Notes\n\nThis prevents the system from completely failing if agent neglects drives. Safety first.",
    "labels": ["phase:release", "priority:p0"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[Release] Migration script and backward compatibility",
    "body": "## Context\n\nExisting v0.2.x installations need smooth migration to v0.3.0 schema without breaking changes.\n\n## Implementation\n\n1. Migration script `migrate_v02_to_v03.py`:\n   - Add new fields (valence, thwarting_count, etc.) with defaults\n   - Convert single threshold to graduated thresholds\n   - Set `manual_mode: false` to preserve v0.2.x behavior\n   - Backup existing state before migration\n2. Auto-migration on daemon start if schema mismatch detected\n3. Validation script to check migration success\n4. Rollback capability if needed\n\n## Acceptance Criteria\n\n- [ ] Migration script converts v0.2.x state to v0.3.0 schema\n- [ ] All new fields initialized with sensible defaults\n- [ ] Existing drive pressures preserved\n- [ ] Backup created before migration\n- [ ] Daemon detects schema version and auto-migrates\n- [ ] Validation confirms successful migration\n- [ ] Rollback script works if migration fails\n- [ ] Documentation for manual migration\n\n## Dependencies\n\nDepends on #4, #7 (new schema fields)\n\n## Notes\n\nTest migration on real v0.2.x state files. Don't lose anyone's drive history.",
    "labels": ["phase:release", "priority:p0"],
    "milestone": "v0.3.0"
  },
  {
    "title": "[Release] Documentation and alpha testing",
    "body": "## Context\n\nComplete user-facing documentation and conduct alpha testing before release.\n\n## Implementation\n\n1. Update README:\n   - Manual satisfaction workflow\n   - Dashboard usage\n   - Threshold system explanation\n   - Aversive states overview\n2. Write migration guide (v0.2.x → v0.3.0)\n3. Update API documentation\n4. Add phenomenology guide (what each threshold feels like)\n5. Alpha test with Aurora:\n   - Enable manual_mode\n   - Let drives reach different thresholds\n   - Document experience\n   - Gather feedback\n6. Create changelog\n\n## Acceptance Criteria\n\n- [ ] README updated with v0.3.0 features\n- [ ] Migration guide complete and tested\n- [ ] API docs reflect new endpoints\n- [ ] Phenomenology guide written\n- [ ] Alpha testing completed with Aurora\n- [ ] Feedback incorporated\n- [ ] CHANGELOG.md updated\n- [ ] Release notes drafted\n\n## Dependencies\n\nDepends on all implementation issues (#1-11)\n\n## Notes\n\nThis is the quality gate before release. Don't rush it.",
    "labels": ["phase:release", "priority:p1"],
    "milestone": "v0.3.0"
  }
]
